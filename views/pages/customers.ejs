<!-- admin/customers.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Customers</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Custom CSS for table styling */
        .table {
            width: 100%;
            margin-bottom: 1rem;
            color: #212529;
            border-collapse: collapse;
        }

        .table th,
        .table td {
            padding: 0.75rem;
            vertical-align: top;
            border-top: 1px solid #dee2e6;
        }

        .table thead th {
            vertical-align: bottom;
            border-bottom: 2px solid #dee2e6;
        }

        .table tbody + tbody {
            border-top: 2px solid #dee2e6;
        }

        .table .table {
            background-color: #fff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="my-4">Admin Customers</h1>
        <% let groupedCustomers = {}; %>
        <% customers.forEach(customer => { %>
            <% if (!groupedCustomers[customer.CustomerID]) { %>
                <% groupedCustomers[customer.CustomerID] = []; %>
            <% } %>
            <% groupedCustomers[customer.CustomerID].push(customer); %>
        <% }); %>

        <% Object.keys(groupedCustomers).forEach(customerID => { %>
            <table class="table table-striped table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>CustomerID</th>
                        <th>FirstName</th>
                        <th>LastName</th>
                        <th>Email</th>
                        <th>PhoneNumber</th>
                        <th>AddressLine1</th>
                        <th>District</th>
                        <th>SubDistrict</th>
                        <th>Province</th>
                        <th>PostalCode</th>
                        <th>Payment</th>
                        <th>OrderID</th>
                        <th>PaymentStatus</th>
                        <th>User ID</th>
                        <th>ProductID</th>
                        <th>Quantity</th>
                        <th>Price</th>
                        <th>Picture</th>
                        <th>Details</th>
                        <!-- Add more headers as needed -->
                    </tr>
                </thead>
                <tbody>
                    <% groupedCustomers[customerID].forEach(customer => { %>
                        <tr>
                            <td><%= customer.CustomerID %></td>
                            <td><%= customer.FirstName %></td>
                            <td><%= customer.LastName %></td>
                            <td><%= customer.Email %></td>
                            <td><%= customer.PhoneNumber %></td>
                            <td><%= customer.AddressLine1 %></td>
                            <td><%= customer.District %></td>
                            <td><%= customer.SubDistrict %></td>
                            <td><%= customer.Province %></td>
                            <td><%= customer.PostalCode %></td>
                            <td><img src="<%= customer.payment.replace(/\\/g, '/') %>" alt="Product Image" style="max-width: 100px; max-height: 100px;"></td>

                            <td><%= customer.order_id %></td>
                            <td><%= customer.payment_status %></td>
                            <td><%= customer.user_id %></td>
                            <td><%= customer.detail_id %></td>
                            <td><%= customer.quantity %></td>
                            <td><%= customer.price %></td>
                            <td><img src="<%= customer.picture %>" alt="Product Image" style="max-width: 100px; max-height: 100px;"></td>
                            <td><%= customer.details %></td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
        <% }); %>
    </div>

    <!-- Bootstrap JS (optional) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
